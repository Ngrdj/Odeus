<options-bar 
    [ngClass]="{hideOptions:!displayOptions, deployOptions:displayOptions}" 
    class="options"
    (characterDetailClick)="displayCharacterDetails = !displayCharacterDetails"
    (myCharactersClick)="displayMyCharacters = !displayMyCharacters"
    (soundClick)="displaySound = !displaySound"
    (backgroundClick)="displayBackgroundSettings = !displayBackgroundSettings"
    (diceClick)="displayDices = !displayDices"
    (mapClick)="displayMap = !displayMap"
    (settingsClick)="displaySettings = !displaySettings"
></options-bar>


<div class="container boundary" [ngStyle]="{'background-image': 'url(' + background + ')'}" [ngClass]="{hideSide:!displaySide, deploySide:displaySide , hideHeader:!displayHeader , deployHeader:displayHeader }">

    <header-bar
      (optionsButtonClick)="showHideOptions()"
      (logoutClick)="logoutUser()"
      (loginClick)="loginUser()"
      [currentUser]="currentUser"
      [ngClass]="{hidden:!displayHeader}"
      class="header">
    </header-bar>
    <button
      (click)="showHideHeader()"
      class="headerButton">
      {{displayHeader?"&uarr;&uarr;&uarr;":"&darr;&darr;&darr;"}}
    </button>
  
    <fight-tracker [fighterList]="fighterList" class="main"></fight-tracker>
  
    <button (click)="showHideSide()" class="sideButton">TEAMS MANAGER</button>
    <team-manager
      [characters] = "userCharacters"
      (characterSelected)="onCharacterSelected($event)"
      (addCharacterToAllies)="addCharacterToFighterList($event,behaviorEnum.ALLY)"
      (addCharacterToEnemies)="addCharacterToFighterList($event,behaviorEnum.ENEMY)"
      [teams]="teams"
      [heroes]="heroes"
      [ngClass]="{hidden:!displaySide}"
      class="side"
      (showHideClick)="showHideSide()"
      [pnjList]='pnjList'>
    </team-manager>
      
    <settings-panel 
      controlPanel
      (closePanel)="displaySettings = false"
      [display]="displaySettings?'block':'none'"
      [currentUser]="currentUser"
      panelTitle="Options"
      cdkDragBoundary=".boundary"
      cdkDrag>
    </settings-panel>

    <my-characters-panel
      controlPanel
      (closePanel)="displayMyCharacters = false"
      [display]="displayMyCharacters?'block':'none'"
      [characteristics]="characteristics"
      [classes]="classes"
      [races]="races"
      [skills]="skills"
      [stories]="stories"
      panelTitle="Mes personnages"
      cdkDragBoundary=".boundary"
      cdkDrag >
    </my-characters-panel>


    <character-details
      controlPanel
      (closePanel)="displayCharacterDetails = false"
      [display]="displayCharacterDetails?'flex':'none'"
      panelTitle="Détails de personnage"
      [character]="selectedCharacter"
      [characteristics]="characteristics"
      cdkDragBoundary=".boundary"
      cdkDrag>
   </character-details>

   <background-panel

      (changeBackground)="onChangeBackground($event)"
      controlPanel
      [display]="displayBackgroundSettings?'block':'none'"
      (closePanel)="displayBackgroundSettings = false"
      panelTitle="paramètres de l'arrière-plan"
      cdkDragBoundary=".boundary"
      cdkDrag
   >
   </background-panel>

   <dice-panel
      controlPanel
      [display]="displayDices?'block':'none'"
      (closePanel)="displayDices = false"
      panelTitle="Dés"
      cdkDragBoundary=".boundary"
      cdkDrag
   >
   </dice-panel>

   
  
  </div>
  
  